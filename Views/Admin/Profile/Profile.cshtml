@model EmployeePortal.Models.Employee
@{
    ViewData["Title"] = "My Profile";
}

<style>
    /* --- Base Container & Header (Dreamy Dusk Themed) --- */
    .profile-card {
        max-width: 900px; /* Slightly wider for better detail distribution */
        margin: 2rem auto;
        border: 1px solid #e2e8f0;
        border-radius: 12px;
        background: #fff;
    }

    .profile-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1.5rem;
        padding-bottom: 0.75rem;
        border-bottom: 1px solid #f1f5f9;
    }

    .profile-title {
        font-size: 1.5rem;
        font-weight: 700;
        margin: 0;
        color: #005B99; /* Primary Blue */
        letter-spacing: -0.5px;
    }

    .profile-sub {
        color: #64748b; /* Slate Grey */
        font-size: 0.95rem;
        margin-top: 4px;
    }

    /* --- Avatar Style --- */
    .profile-avatar {
        width: 92px;
        height: 92px;
        /* Dreamy Dusk Gradient */
        background: linear-gradient(135deg, #005B99 0%, #004070 100%);
        border-radius: 50%; /* Circular Avatar */
        box-shadow: 0 4px 15px rgba(0, 91, 153, 0.25);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        color: #ffffff;
        font-size: 2rem;
        margin: 0 auto;
        border: 4px solid #fff;
    }

    /* --- Details Grid --- */
    .detail-label {
        color: #64748b; /* Slate Grey */
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.75rem;
        letter-spacing: 0.5px;
        margin-bottom: 4px;
        padding-top: 4px; /* Align with new tight spacing */
    }

    .detail-value {
        color: #0f172a; /* Ink Black */
        font-weight: 500;
        font-size: 0.95rem;
    }

    /* Custom Badges */
    .badge-active-custom {
        background-color: #dcfce7;
        color: #166534;
        border: 1px solid #bbf7d0;
        padding: 6px 12px;
        border-radius: 50px;
    }

    .badge-inactive-custom {
        background-color: #f1f5f9;
        color: #475569;
        border: 1px solid #e2e8f0;
        padding: 6px 12px;
        border-radius: 50px;
    }

    /* Ensure card body doesn't interfere with main layout */
    .card-soft {
        background: #fff;
        border-radius: 12px;
        border: 1px solid #e2e8f0;
    }

    .small-muted {
        color: #64748b;
        font-size: .9rem;
    }

    .actions {
        margin-top: 24px;
        padding-top: 1rem;
        border-top: 1px solid #f1f5f9;
    }
</style>

<div class="card-soft card profile-card shadow-lg">
    <div class="card-body p-4 p-md-5">

        <div class="profile-header">
            <div>
                <h3 class="profile-title">My Profile</h3>
                <div class="profile-sub">View your profile details</div>
            </div>

            <div class="text-end">
                <div class="badge-active-custom" style="background: #eef2ff; color: #005B99;">
                    <i class="bi bi-shield-lock-fill me-1"></i>
                    <span>Admin</span>
                </div>
            </div>
        </div>

        <div class="row g-5 align-items-start">

            <div class="col-md-4 text-center border-end-md">
                <div class="profile-avatar mb-3">
                    @{
                        string initials = "NA";
                        if (!string.IsNullOrWhiteSpace(Model.FullName))
                        {
                            var parts = Model.FullName.Split(' ', StringSplitOptions.RemoveEmptyEntries);
                            initials = parts.Length == 1
                            ? parts[0][0].ToString().ToUpper()
                            : (parts[0][0].ToString() + parts[^1][0].ToString()).ToUpper();
                        }
                    }
                    @initials
                </div>

                <div class="fw-bold fs-5 text-dark mb-1">@Model.FullName</div>
                <div class="small-muted">@(!string.IsNullOrWhiteSpace(Model.User?.Email) ? Model.User.Email : "-")</div>

                <div class="mt-3">
                    @if (Model.IsActive)
                    {
                        <span class="badge-active-custom small fw-semibold">
                            <i class="bi bi-check-circle-fill me-1"></i> Active
                        </span>
                    }
                    else
                    {
                        <span class="badge-inactive-custom small fw-semibold">
                            Inactive
                        </span>
                    }
                </div>
            </div>

            <div class="col-md-8">
                <dl class="row mb-0 gy-1">
                    <dt class="col-sm-4 detail-label">Full Name</dt>
                    <dd class="col-sm-8 detail-value">@Model.FullName</dd>

                    <dt class="col-sm-4 detail-label">Email</dt>
                    <dd class="col-sm-8 detail-value">@(!string.IsNullOrWhiteSpace(Model.User?.Email) ? Model.User.Email : "-")</dd>

                    <dt class="col-sm-4 detail-label">Phone</dt>
                    <dd class="col-sm-8 detail-value">@(!string.IsNullOrWhiteSpace(Model.Phone) ? Model.Phone : "-")</dd>

                    <dt class="col-sm-4 detail-label">Address</dt>
                    <dd class="col-sm-8 detail-value">@(!string.IsNullOrWhiteSpace(Model.Address) ? Model.Address : "-")</dd>

                    <dt class="col-sm-4 detail-label">Department</dt>
                    <dd class="col-sm-8 detail-value">-</dd>

                    <dt class="col-sm-4 detail-label">Date of Joining</dt>
                    <dd class="col-sm-8 detail-value">@Model.DateOfJoining.ToShortDateString()</dd>
                </dl>

                <div class="d-flex justify-content-end actions">
                    <a asp-action="Dashboard" class="btn btn-light border text-muted me-2 px-4">Back</a>
                    <a asp-action="EditContact" class="btn btn-primary fw-semibold px-4 shadow-sm">
                        <i class="bi bi-pencil-square me-1"></i> Edit Contact
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>